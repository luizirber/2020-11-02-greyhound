(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1:function(e,n,t){"use strict";(function(e){const n=t(73);var r=t(75),o=t(87).FASTQStream,a=t(94),i=t(123),c=t(134);const d=t(137),s=t(146),l=document.querySelector("#drag-container"),u=document.querySelector("#progress-bar"),p=document.querySelector("#download_btn"),f=document.querySelector("#results-container");let h,m=0,b=0;const g=()=>l.classList.add("dragging"),w=()=>l.classList.remove("dragging");function v(){return c((function(e,n){return function(e){return 31===e[0]&&139===e[1]}(e)?n(null,new i.Unzip):n(null,d())}))}function _(){return c((function(n,t){return function(e){return">"===e.toString().charAt(0)}(n)?t(null,s.obj(a(),d.obj((function(n,t,r){e.isBuffer(n)&&(n=n.toString()),JSON.parse(n),this.push(JSON.parse(n)),r()}),(function(){this.push(null)})))):function(e){return"@"===e.toString().charAt(0)}(n)?t(null,new o):void t(new Error("No parser available"))}))}function y(e){w(),e.preventDefault(),p.disabled=!0,u.style.transform="translateX(-100%)";var t=e.dataTransfer.files[0],o=new r(t);m=t.size,h=t.name,o.reader.onprogress=e=>{b+=e.loaded;let n=100-b/m*100;u.style.transform=`translateX(${-n}%)`};var a=new n.ComputeParameters;a.scaled=BigInt(2e3);var c=new n.Signature(a),d=new _,s=new v;switch(d.on("data",(function(e){c.add_sequence_js(e.seq)})).on("end",(function(e){const n=c.to_json(),t=new window.Blob([n],{type:"application/octet-binary"}),r=window.URL.createObjectURL(t),o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download",h+".sig"),document.querySelectorAll("#download_btn a").forEach(e=>e.parentNode.removeChild(e)),p.appendChild(o),p.addEventListener("click",()=>{o.click()}),p.disabled=!1,u.style.transform="translateX(0%)",fetch("/gather",{method:"POST",body:n,headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{const n=document.createElement("table");let t=n.createTHead();for(const e of["overlap","p_query","p_match","name"]){let n=document.createElement("th"),r=document.createTextNode(e);n.appendChild(r),t.appendChild(n)}const r=function(e,n){return e.toFixed(n).replace(/\.?0*$/,"")};for(const t of e){let e,a,i=n.insertRow(-1);t.intersect_bp=(o=t.intersect_bp)<500?r(o,0)+" bp":o<=5e5?r(o/1e3,1)+" Kbp":o<5e8?r(o/1e6,1)+" Mbp":o<5e11?r(o/1e9,1)+" Gbp":"???",t.f_orig_query=r(100*t.f_orig_query,1)+"%",t.f_match=r(100*t.f_match,1)+"%",t.average_abund=r(t.average_abund,1);for(const n of["intersect_bp","f_orig_query","f_match"])e=i.insertCell(-1),a=document.createTextNode(t[n]),e.appendChild(a);e=i.insertCell(-1);let c=new String(t.filename).substring(t.filename.lastIndexOf("/")+1);c=c.substring(0,c.length-4);const d=document.createElement("a");d.setAttribute("href","https://www.ncbi.nlm.nih.gov/assembly/"+c),a=document.createTextNode(t.name),d.appendChild(a),e.appendChild(d)}for(var o;f.firstChild;)f.removeChild(f.firstChild);f.appendChild(n)})})),t.type){case"application/gzip":o.pipe(new i.Unzip).pipe(d);break;default:o.pipe(s).pipe(d)}}l.addEventListener("dragenter",g),l.addEventListener("dragover",g),l.addEventListener("drop",y),l.addEventListener("dragleave",w)}).call(this,t(4).Buffer)},112:function(e,n){},115:function(e,n){},117:function(e,n){},139:function(e,n){},141:function(e,n){},148:function(e,n){},151:function(e,n){},153:function(e,n){},77:function(e,n){},79:function(e,n){},88:function(e,n){},90:function(e,n){}}]);